(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,n){e.exports=n(37)},30:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(17),o=n.n(l),c=(n(30),n(1)),i=n(11),u=n.n(i),s=n(18),p=n(23);function h(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),l=n[0],o=n[1];function c(){return(c=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:55555/users/".concat(localStorage.email),{headers:{authorization:localStorage.token}}).then((function(e){return e.json()}));case 3:t=e.sent,o(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){c.apply(this,arguments)}()}),[]),localStorage.token?r.a.createElement("div",null,JSON.stringify(l)):(e.history.push("/login"),null)}var m=n(8),f=n(12),d=n(19),v=n(20),b=n(24),g=n(22),E=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isLogin:!1,values:{},error:""},e.submitHandler=function(t){t.preventDefault();var n=e.state,a=n.isLogin,r=n.values;e.setState({error:""}),fetch("http://localhost:55555/user/".concat(a?"login":""),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(t){t.error?e.setState({error:t.error.message||t.error}):(localStorage.token=t.token,localStorage.email=r.email,e.props.history.push("/"))})).catch((function(t){e.setState({error:t.message||t})}))},e.changeHandler=function(t){var n=t.target,a=n.name,r=n.value;e.setState({values:Object(f.a)(Object(f.a)({},e.state.values),{},Object(m.a)({},a,r))})},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.isLogin,a=t.error;return localStorage.token?(this.props.history.push("/"),null):r.a.createElement("div",null,r.a.createElement("h1",null,n?"\u05db\u05e0\u05d9\u05e1\u05d4":"\u05d4\u05e8\u05e9\u05de\u05d4"),r.a.createElement("form",{onSubmit:this.submitHandler,onChange:this.changeHandler},n?null:r.a.createElement("input",{name:"name",placeholder:"\u05e9\u05dd",type:"text",required:!0}),r.a.createElement("br",null),r.a.createElement("input",{name:"email",placeholder:'\u05d3\u05d5\u05d0"\u05dc',type:"email",required:!0}),r.a.createElement("br",null),r.a.createElement("input",{name:"password",placeholder:"\u05e1\u05d9\u05e1\u05de\u05d0 ",type:"password",required:!0}),r.a.createElement("br",null),r.a.createElement("input",{value:"\u05e9\u05dc\u05d7",type:"submit"})),a?r.a.createElement("h3",{style:{color:"red"}},a):null,r.a.createElement("button",{onClick:function(){return e.setState({isLogin:!n})}},n?"\u05e2\u05d5\u05d3 \u05dc\u05d0 \u05e8\u05e9\u05d5\u05dd? \u05dc\u05d7\u05e5 \u05db\u05d0\u05df":"\u05db\u05d1\u05e8 \u05e8\u05e9\u05d5\u05dd? \u05dc\u05d7\u05e5 \u05db\u05d0\u05df"))}}]),n}(r.a.Component);var y=function(){return r.a.createElement("main",null,r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",exact:!0,component:h}),r.a.createElement(c.a,{path:"/login",component:E})))},S=n(10);o.a.render(r.a.createElement(S.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null))),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.204b61f7.chunk.js.map