{"version":3,"sources":["Users.js","Login.js","App.js","index.js"],"names":["Users","props","useState","users","setUsers","a","fetch","localStorage","email","headers","authorization","token","then","r","json","res","useEffect","fetchUsers","JSON","stringify","history","push","Login","state","isLogin","values","error","submitHandler","e","preventDefault","setState","method","Accept","body","message","catch","err","changeHandler","target","name","value","this","onSubmit","onChange","placeholder","type","required","style","color","onClick","React","Component","App","path","exact","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sPAEe,SAASA,EAAMC,GAAQ,IAAD,EACPC,mBAAS,IADF,mBAC1BC,EAD0B,KACnBC,EADmB,iDAGjC,4BAAAC,EAAA,+EAE0BC,MAAM,UAAD,OAAWC,aAAaC,OAAS,CACpDC,QAAS,CACLC,cAAeH,aAAaI,SAEjCC,MAAK,SAAAC,GAAC,OAAIA,EAAEC,UANvB,OAEcC,EAFd,OAQQX,EAASW,GARjB,0GAHiC,sBAmBjC,OAFAC,qBAAU,YAjBuB,mCAiBfC,KAAgB,IAE7BV,aAAaI,MAKX,6BACFO,KAAKC,UAAUhB,KALhBF,EAAMmB,QAAQC,KAAK,UACZ,M,mDCmDAC,E,4MAvEXC,MAAQ,CACJC,SAAS,EACTC,OAAQ,GACRC,MAAO,I,EAGXC,cAAgB,SAAAC,GACZA,EAAEC,iBADe,MAGW,EAAKN,MAAzBC,EAHS,EAGTA,QAASC,EAHA,EAGAA,OACjB,EAAKK,SAAS,CAAEJ,MAAO,KACvBpB,MAAM,SAAD,OACQkB,EAAU,QAAU,IAC7B,CACIO,OAAQ,OACRtB,QAAS,CACLuB,OAAQ,mBACR,eAAgB,oBAEpBC,KAAMf,KAAKC,UAAUM,KAE3Bb,MAAK,SAAAC,GAAC,OAAIA,EAAEC,UACTF,MAAK,SAAAG,GACEA,EAAIW,MACJ,EAAKI,SAAS,CAAEJ,MAAOX,EAAIW,MAAMQ,SAAWnB,EAAIW,SAEhDnB,aAAaI,MAAQI,EAAIJ,MACzBJ,aAAaC,MAAQiB,EAAOjB,MAC5B,EAAKP,MAAMmB,QAAQC,KAAK,SAG/Bc,OAAM,SAAAC,GACH,EAAKN,SAAS,CAAEJ,MAAOU,EAAIF,SAAWE,Q,EAIlDC,cAAgB,SAAAT,GAAM,IAAD,EACOA,EAAEU,OAAlBC,EADS,EACTA,KAAMC,EADG,EACHA,MACd,EAAKV,SAAS,CACVL,OAAO,2BACA,EAAKF,MAAME,QADZ,kBAEDc,EAAOC,O,uDAKV,IAAD,SACsBC,KAAKlB,MAAxBC,EADH,EACGA,QAASE,EADZ,EACYA,MAEjB,OAAInB,aAAaI,OACb8B,KAAKxC,MAAMmB,QAAQC,KAAK,KACjB,MAGJ,6BACH,4BAAKG,EAAU,iCAAU,kCACzB,0BAAMkB,SAAUD,KAAKd,cAAegB,SAAUF,KAAKJ,eAC9Cb,EAAU,KAAO,2BAAOe,KAAK,OAAOK,YAAY,eAAKC,KAAK,OAAOC,UAAQ,IAC1E,6BACA,2BAAOP,KAAK,QAAQK,YAAY,4BAAQC,KAAK,QAAQC,UAAQ,IAC7D,6BACA,2BAAOP,KAAK,WAAWK,YAAY,kCAASC,KAAK,WAAWC,UAAQ,IACpE,6BACA,2BAAON,MAAM,qBAAMK,KAAK,YAE3BnB,EAAQ,wBAAIqB,MAAO,CAAEC,MAAO,QAAUtB,GAAc,KACrD,4BAAQuB,QAAS,kBAAM,EAAKnB,SAAS,CAAEN,SAAUA,MAAaA,EAAU,kGAAyB,2F,GAnEzF0B,IAAMC,WCaXC,MATf,WACE,OAAO,8BACL,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,KAAK,IAAIC,OAAK,EAACC,UAAWvD,IACjC,kBAAC,IAAD,CAAOqD,KAAK,SAASE,UAAWjC,O,QCLtCkC,IAASC,OACP,kBAAC,IAAD,KACE,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,QAIJC,SAASC,eAAe,W","file":"static/js/main.299ab0f7.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\r\n\r\nexport default function Users(props) {\r\n    const [users, setUsers] = useState([])\r\n\r\n    async function fetchUsers() {\r\n        try {\r\n            const res = await fetch(`/users/${localStorage.email}`, {\r\n                headers: {\r\n                    authorization: localStorage.token\r\n                }\r\n            }).then(r => r.json())\r\n            debugger\r\n            setUsers(res)\r\n        } catch (error) {\r\n            debugger\r\n        }\r\n    }\r\n\r\n    useEffect(() => { fetchUsers() }, [])\r\n\r\n    if (!localStorage.token) {\r\n        props.history.push('/login')\r\n        return null\r\n    }\r\n\r\n    return <div>\r\n        {JSON.stringify(users)}\r\n    </div>\r\n}","import React from 'react'\r\n\r\nclass Login extends React.Component {\r\n    state = {\r\n        isLogin: false,\r\n        values: {},\r\n        error: ''\r\n    }\r\n\r\n    submitHandler = e => {\r\n        e.preventDefault()\r\n\r\n        const { isLogin, values } = this.state\r\n        this.setState({ error: '' })\r\n        fetch(\r\n            `/user/${isLogin ? 'login' : ''}`,\r\n            {\r\n                method: 'POST',\r\n                headers: {\r\n                    Accept: 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(values)\r\n            }\r\n        ).then(r => r.json())\r\n            .then(res => {\r\n                if (res.error)\r\n                    this.setState({ error: res.error.message || res.error })\r\n                else {\r\n                    localStorage.token = res.token\r\n                    localStorage.email = values.email\r\n                    this.props.history.push('/')\r\n                }\r\n            })\r\n            .catch(err => {\r\n                this.setState({ error: err.message || err })\r\n            })\r\n    }\r\n\r\n    changeHandler = e => {\r\n        const { name, value } = e.target\r\n        this.setState({\r\n            values: {\r\n                ...this.state.values,\r\n                [name]: value\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { isLogin, error } = this.state\r\n\r\n        if (localStorage.token) {\r\n            this.props.history.push('/')\r\n            return null\r\n        }\r\n\r\n        return <div>\r\n            <h1>{isLogin ? 'כניסה' : 'הרשמה'}</h1>\r\n            <form onSubmit={this.submitHandler} onChange={this.changeHandler} >\r\n                {isLogin ? null : <input name='name' placeholder='שם' type='text' required />}\r\n                <br />\r\n                <input name='email' placeholder='דוא\"ל' type='email' required />\r\n                <br />\r\n                <input name='password' placeholder='סיסמא ' type='password' required />\r\n                <br />\r\n                <input value='שלח' type='submit' />\r\n            </form>\r\n            {error ? <h3 style={{ color: 'red' }}>{error}</h3> : null}\r\n            <button onClick={() => this.setState({ isLogin: !isLogin })}>{isLogin ? 'עוד לא רשום? לחץ כאן' : 'כבר רשום? לחץ כאן'}</button>\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default Login","import React from 'react';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom'\nimport Users from './Users'\nimport Login from './Login'\n\nfunction App() {\n  return <main>\n    <Switch>\n      <Route path='/' exact component={Users} />\n      <Route path='/login' component={Login} />\n    </Switch>\n  </main>\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom'\n\nReactDOM.render(\n  <BrowserRouter>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </BrowserRouter>\n  ,\n  document.getElementById('root')\n)"],"sourceRoot":""}